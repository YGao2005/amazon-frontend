# Replate - Smart Recipe App

A SwiftUI iOS app that connects to your FastAPI backend for intelligent recipe generation and ingredient management.

## ðŸš€ Backend Integration

This app is now fully integrated with your FastAPI backend! Here's how to set it up:

### Prerequisites

1. **FastAPI Backend Running**: Make sure your backend is running on `localhost:8000`
2. **iOS Simulator**: The app is configured to work with the iOS Simulator by default

### Setup Instructions

1. **Start your FastAPI backend** on port 8000:
   ```bash
   # In your backend directory
   uvicorn main:app --host 0.0.0.0 --port 8000 --reload
   ```

2. **Build and run the iOS app** in Xcode:
   - Open `replate.xcodeproj` in Xcode
   - Select iPhone Simulator (any model)
   - Press `Cmd+R` to build and run

### ðŸ”— API Integration Features

#### âœ… **Ingredient Management**
- **Real Camera Scanning**: Uses your `/api/ingredients/scan` endpoint with Llama 4 Vision
- **Automatic Sync**: All ingredient changes sync with your backend
- **Expiration Tracking**: Shows real expiration estimates from your AI

#### âœ… **Recipe Generation**
- **Gemini Flash Integration**: Calls `/api/recipes/generate` with user preferences
- **Smart Filtering**: Respects cuisine preferences and must-use ingredients
- **Real-time Results**: Generated recipes appear instantly in the feed

#### âœ… **Image Generation**
- **Gemini 2.0 Images**: Automatically loads generated recipe images
- **Async Loading**: Smooth image loading with progress indicators

#### âœ… **Complete Data Flow**
- **Real API Calls**: No more mock data - everything connects to your backend
- **Error Handling**: Comprehensive error messages for API failures
- **Loading States**: Beautiful loading indicators during API calls

### ðŸ›  Configuration

#### Backend URL Configuration
The app is configured to connect to `http://localhost:8000/api` by default.

**To change the backend URL:**
1. Open `replate/APIService.swift`
2. Update the `baseURL` property:
   ```swift
   private let baseURL = "http://your-backend-url:port/api"
   ```

#### For Device Testing (Not Simulator)
If testing on a physical device, replace `localhost` with your computer's IP address:
```swift
private let baseURL = "http://192.168.1.100:8000/api"  // Your actual IP
```

### ðŸ“± App Features Connected to Backend

#### **1. Home View**
- Loads recipes from `/api/recipes`
- Displays generated recipe images
- Pull-to-refresh syncs with backend
- Real-time loading states

#### **2. Fridge View**  
- Syncs ingredients with `/api/ingredients`
- Camera scanning via `/api/ingredients/scan`
- Real ingredient confirmation flow
- Automatic inventory updates

#### **3. Generate View**
- Calls `/api/recipes/generate` with preferences
- Sends cuisine preferences and must-use ingredients
- Automatically navigates to results
- Real recipe generation with AI

#### **4. Recipe Detail View**
- Shows real nutritional information
- Marks recipes as cooked via `/api/recipes/cooked`
- Updates inventory when recipes are completed

#### **5. Profile View**
- Syncs preferences with `/api/preferences`
- Real statistics from backend data
- Persistent user settings

### ðŸŽ¯ Demo Flow

1. **Start Backend**: Your FastAPI server with all AI integrations
2. **Launch App**: Open in iOS Simulator
3. **Scan Ingredients**: Camera will call your Llama 4 Vision API
4. **Generate Recipes**: AI will create recipes using Gemini Flash
5. **View Images**: Recipe images generated by Gemini 2.0
6. **Cook & Rate**: Complete the cooking flow with backend sync

### ðŸš¨ Troubleshooting

#### **Connection Issues**
- Ensure backend is running on port 8000
- Check that the backend URL in `APIService.swift` is correct
- For device testing, use your computer's IP address instead of localhost

#### **API Errors**
- Check the Xcode console for detailed error messages
- Verify your backend API endpoints match the expected schema
- Ensure CORS is configured if needed

#### **Image Loading Issues**
- Verify recipe image URLs are accessible
- Check that Firebase Storage URLs are public (if using Firebase)

### ðŸ“‹ Backend Endpoints Used

The app makes calls to all these endpoints from your backend specification:

- `POST /api/ingredients/scan` - Camera ingredient detection
- `GET /api/ingredients` - Fetch ingredient inventory  
- `POST /api/ingredients/update` - Sync ingredient changes
- `POST /api/recipes/generate` - AI recipe generation
- `POST /api/recipes/image` - Generate recipe images
- `GET /api/recipes` - Fetch recipe history
- `POST /api/recipes/cooked` - Mark recipes as cooked
- `GET /api/preferences` - Get user preferences
- `POST /api/preferences` - Update user preferences

### ðŸŽ‰ Ready for Your Hackathon!

Your iOS app now seamlessly connects to your FastAPI backend with:
- âœ… Real AI-powered ingredient scanning
- âœ… Live recipe generation with Gemini Flash  
- âœ… Beautiful recipe images from Gemini 2.0
- âœ… Complete data synchronization
- âœ… Professional error handling and loading states
- âœ… Smooth user experience throughout

Just start your backend and launch the app - everything works together perfectly! ðŸš€ 